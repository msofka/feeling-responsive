<!doctype html> <html class="no-js" lang="en"> <head> <meta charset="utf-8" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <title>Location Registration and Recognition (LRR)</title> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> <link rel="stylesheet" href="/assets/css/styles_feeling_responsive.css"> <link rel="stylesheet" href="/assets/css/tweetstyle.css"> <link rel="stylesheet" href="/assets/css/bibliographystyle.css"> <script src="/assets/js/modernizr.min.js"></script> <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script> <script> WebFont.load({ google: { families: [ 'Lato:400,700,400italic:latin', 'Volkhov::latin' ] } }); </script> <noscript> <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic|Volkhov' rel='stylesheet' type='text/css'> </noscript> <meta name="description" content=""/> <link rel="icon" sizes="32x32" href="/assets/img/favicon-32x32.png"> <link rel="icon" sizes="192x192" href="/assets/img/favicon-32x32.png"> <link rel="apple-touch-icon-precomposed" sizes="180x180" href="/assets/img/favicon-32x32.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/assets/img/favicon-32x32.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/img/favicon-32x32.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/assets/img/favicon-32x32.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/img/favicon-32x32.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/assets/img/favicon-32x32.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/img/favicon-32x32.png"> <link rel="apple-touch-icon-precomposed" href="/assets/img/favicon-32x32.png"> <meta name="msapplication-TileImage" content="/assets/img/favicon-32x32.png"/> <meta name="msapplication-TileColor" content="#fabb00"> <!-- Facebook Optimization --> <meta property="og:locale" content="en_EN" /> <meta property="og:type" content="website" /> <meta property="og:title" content="Location Registration and Recognition (LRR)" /> <meta property="og:description" content="Homepage of Michal Sofka, scientist and technical leader with passion for innovation to transform ideas into product solutions."/> <meta property="og:url" content="http://localhost:4000///projects/lrr_src/" /> <!-- Search Engine Optimization --> <link type="text/plain" rel="author" href="/humans.txt" /> </head> <body id="top-of-page" class=""> <div id="navigation" class="sticky"> <nav class="top-bar" data-topbar> <ul class="title-area"> <li class="name"> <h1 class="show-for-small-only"><a href="/" class="icon-home"> </a></h1> </li> <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone --> <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li> </ul> <section class="top-bar-section"> <ul class="right"> <li class="divider"></li> <li><a href="/blog/">Blog</a></li> <li class="divider"></li> <li><a href="/contact/">Contact</a></li> </ul> <ul class="left"> <li><a href="/">Home</a></li> <li class="divider"></li> <li class="has-dropdown "> <a href="/about/">About</a> <ul class="dropdown"> <li><a href="/about/">Bio</a></li> <li><a href="/affiliation/">Affiliation</a></li> </ul> </li> <li class="divider"></li> <li class="has-dropdown "> <a href="/projects/">Projects</a> <ul class="dropdown"> <li><a href="/projects/#imga">Image Analysis</a></li> <li><a href="/projects/#nwsecu">Network Security</a></li> <li><a href="/projects/news/">News</a></li> <li><a href="/activities/">Activities</a></li> <li><a href="/downloads/">Downloads</a></li> </ul> </li> <li class="divider"></li> <li class="has-dropdown "> <a href="/publications/">Publications</a> <ul class="dropdown"> <li><a href="/publications/#papers">Papers</a></li> <li><a href="/publications/#patents">Patents</a></li> </ul> </li> <li class="divider"></li> <li><a href="/inmedia/">In Media</a></li> <li class="divider"></li> </ul> </section> </nav> </div><!-- /#navigation --> <div class="row t30"> <div class="medium-10 columns medium-offset-1 end"> <article itemscope itemtype="http://schema.org/Article"> <header> <span itemprop="name"> <p class="subheadline"></p> <h1></h1> </span> </header> <p class="teaser" itemprop="description"> </p> <span itemprop="articleSection"> <h5 class="navigatorButtons"><a href="/projects/">Projects</a> / <a href="/downloads/">Downloads</a> / LRR Source Code </h5> <TABLE class="container-fluid" style="border:0;background-color:transparent;"> <TR> <TD style="padding: 10 10 10 10; vertical-align: top"> <p class=cap>Download Source Code of the Location Registration and Recognition</p> <p class=text>This source code implements <a href="LRR.html">Location Registration and Recognition (LRR)</a> algorithm. The algorithm includes feature extraction, estimation, and decision components. The code is distributed under the Apache 2.0 license approved by the <a href="http://www.opensource.org">Open Source Initiative</a> (OSI). <br> <br> <p class=text><font color=red>Note 12/12/2013: Updated code to work with ITK version 4.</font></p> <table> <tr> <th class=text style="BACKGROUND-COLOR: rgb(166,166,166); text-align: center;">Description</th> <th class=text style="BACKGROUND-COLOR: rgb(166,166,166); text-align: center;" colspan=3>Download Link</th> </tr> <tr class=text> <td style="BACKGROUND-COLOR: rgb(206,206,206); padding: 5 5 5 5;">LRR Source Code</td> <td style="BACKGROUND-COLOR: rgb(206,206,206); padding: 5 5 5 5; text-align: center;"><a href="http://www.cs.rpi.edu/~sofka/cgi-bin/downloadvw.cgi?lrr_src">sofka-lrr_src.zip</a> (0.5 MB)</td> </tr> <tr class=text> <td style="BACKGROUND-COLOR: rgb(206,206,206); padding: 5 5 5 5;">LRR Win32 binaries</td> <td style="BACKGROUND-COLOR: rgb(206,206,206); padding: 5 5 5 5; text-align: center;"><a href="http://www.cs.rpi.edu/~sofka/cgi-bin/downloadvw.cgi?lrr_bin">sofka-lrr_bin.zip</a> (12 MB)</td> </tr> <tr class=text> <td style="BACKGROUND-COLOR: rgb(206,206,206); padding: 5 5 5 5;">Example Volume Pair *</td> <td style="BACKGROUND-COLOR: rgb(206,206,206); padding: 5 5 5 5; text-align: center;"><a href="http://www.cs.rpi.edu/~sofka/cgi-bin/downloadvw.cgi?volume_pair">sofka-volume_pair.zip</a> (32 MB)</td> </tr> <tr class=text> <td style="BACKGROUND-COLOR: rgb(206,206,206); padding: 5 5 5 5;">Example Output</td> <td style="BACKGROUND-COLOR: rgb(206,206,206); padding: 5 5 5 5; text-align: center;"><a href="http://www.cs.rpi.edu/~sofka/cgi-bin/downloadvw.cgi?processed_pair">sofka-processed_pair.zip</a> (216 MB)</td> </tr> <tr class=text> <td colspan=4> * The volume pair comes from the <a href="https://wiki.nci.nih.gov/display/Imaging/RIDER/">RIDER database</a> of the <a href="https://imaging.nci.nih.gov/ncia/">National Cancer Imaging Archives</a>. </td> </table> <p class=text><b>Build</b></p> <p class=text><a href="http://www.cmake.org/">CMake build system</a> is recommended for creating make files and project files. CMake files are included with the source code distribution. <p class=text><b>Run</b></p> <p class=text>The algorithm components are run separately without including them in one executable. This makes the components easier to debug, evaluate, and integrate in other projects. The disadvantage is that data is loaded and saved multiple times. What follows are the steps to run the LRR algorithm. The steps consists of calling each executable from simple bash scripts (use directly in Linux or <a href="http://www.cygwin.com">download Cygwin</a> to use on Windows). In the scripts, you will need to modify path to your binaries. You can also run the executables directly (see below). <br><br> <h4>Step 1. &nbsp;</h4> <p>Extract features, keypoints, and descriptors:<pre> ./extract_features.bash volumes_with_nodules.txt</pre><br> <p>The script also calls a script that computes a Voronoi map for each feature set:<pre> ./compute_distance_map.bash volumes_with_nodules.txt</pre><br> <p>In addition, the script also computes watershed oversegmentations by running:<pre> ./watershed_segmentation.bash volumes_with_nodules.txt</pre><br> <p>Features, keypoints, and descriptors are stored in a VTK format. <p>Alternatively, you can run the command line executables directly for each volume (CMD> denotes command line):<pre>
 CMD> cd 0009/4893
 CMD> ExtractFeatures 4978whole 4978whole_00.vtk
 CMD> ExtractKeypoints 4978whole_00.vtk 4978wholekeypoints.vtk
 CMD> ComputeDescriptors 4978wholekeypoints.vtk 4978whole_00.vtk 4978wholedesc.vtk
 CMD> compute_distance_map 4978whole
 CMD> WatershedSegmentation1 4978whole 4978wholewatershed 2.0 10 0.001 0.10</pre><p> <p>Repeat the steps for volume in 0009/4717. <br> <br> <h4>Step 2. &nbsp;</h4> <p>Generate initializations by keypoint indexing:<pre> ./invariant_indexing.bash pairs_with_nodules.txt</pre><br> <p>This creates a directory ``nodules'' which contains: 1) moving and fixed descriptors for each match, 2) images surrounding fixed and moving keypoints, 3) the query location and its neighborhood within fixed image. <br><br> <p>Running the executable directly:<pre>
 CMD> cd 0009
 CMD> indexing_one_descriptor.exe 4717/4722wholedesc.vtk 4893/4978wholedesc.vtk \
  -mov 4717/4722whole -fix 4893/4978whole \
  -trans 4893_4978whole-4717_4722wholediff.vtk -locs  4893/4978nodules.txt</pre><br> (Note: Images are specified for debugging purposes. They are not used in the algorithm.) <br> <br> <h4>Step 3. &nbsp;</h4> <p>Use the initializations generated in the previous step to refine the estimate and output the verified transform:<pre> ./location_registration.bash pairs_with_nodules.txt</pre><br> <p>This creates a directory ``nodulesreg'' that contains: 1) a text file with the final estimated transform and various statistics, and 2) a transform and its inverse in VTK format. If LAST_ITER is defined as 1 in the code, the executable will also produce a panel of 9 images containing fixed, moving, and checkerboard images of axial, sagittal, and coronal slices. <br> Running the executable directly:<pre>
 CMD> cd 0009     
 CMD> location_registration.exe 4893/4978whole 4717/4722whole \
 -trans 4893_4978whole-4717_4722wholediff.vtk \
 -matches 4893/4978nodules.txt -segment watershed</pre><p>(Note: Images are specified for debugging purposes. They are not used in the algorithm.) <!-- If location_registration_warping is used in this script the executable also saves a panel of 9 images which includes axial, sagittal, and coronal slices of neighborhoods surrounding the corresponding nodules and checkerboards composed of those images.--> <br> <br> <br> <p class=text><b><A NAME="bibliography">Publications and Further Reading</A></b></p> <TABLE> <TR> <TD style="padding: 0 0 15 0; vertical-align: top"> <p class=text> Location Registration and Recognition (LRR) for Serial Analysis of Nodules in Lung CT Scans <BR> <STRONG>Michal Sofka</STRONG> and Charles V. Stewart<BR> <I>In Medical Image Analysis, vol. 14, no. 3, pp. 407--428, Jun. 2010.</I> <BR> <A HREF="pdfs/sofka-mia10.pdf">[pdf]</A> <A HREF="pdfs/sofka-mia10.bib">[bibtex]</A> <A HREF="LRR.html">[website]</A> <A HREF="http://dx.doi.org/10.1016/j.media.2010.02.006">[publisher]</A> </p> </TD> </TR> <TR> <TD style="padding: 0 0 15 0; vertical-align: top"> <p class=text><A NAME="sofka:miccai08"> Location Registration and Recognition (LRR) for Longitudinal Evaluation of Corresponding Regions in CT Volumes</A><BR> Michal Sofka and Charles V. Stewart<BR> <I>In Proceedings of the International Conference on Medical Image Computing and Computer Assisted Intervention (MICCAI), vol. 2, pp. 989-997, New York, NY, 6-10 Sep. 2008.</I> <BR> <A HREF="pdfs/sofka-miccai08.pdf">[pdf]</A> <A HREF="pdfs/sofka-miccai08.bib">[bibtex]</A> <A HREF="LRR.html">[website]</A> <A HREF="http://dx.doi.org/10.1007/978-3-540-85990-1_119">[publisher]</A> </p> </TD> </TR> </TABLE> <BR> </TD> </TR> </TABLE> </TD> </TR> <TR> <TD colspan=3 class=borders style="border-right: 1px solid #000000" height=30>&nbsp; </TD> </TR> </TABLE> </span> </article> </div><!-- /.medium-8.columns --> </div><!-- /.row --> <div id="up-to-top" class="row"> <div class="small-12 columns" style="text-align: right;"> <a class="iconfont" href="#top-of-page">&#xf108;</a> </div><!-- /.small-12.columns --> </div><!-- /.row --> <footer id="footer-content" class="bg-grau"> <div id="subfooter"> <nav class="row"> <div id="subfooter-left" class="b15 small-12 medium-5 columns"> <h5>About this site</h5> <p> Homepage of Michal Sofka, scientist and technical leader with passion for innovation to transform ideas into product solutions. </p> </div> <div id="subfooter-right" class="t30 small-12 medium-6 medium-offset-1 columns social-icons"> <ul class="inline-list"> <li><a href="mailto:michal.sofka@gmail.com" target="_blank" class="icon-mail" title="Email"></a></li> <li><a href="https://twitter.com/MichalSofka" target="_blank" class="icon-twitter" title="Twitter"></a></li> <li><a href="https://www.linkedin.com/in/sofka/" target="_blank" class="icon-linkedin" title="LinkedIn"></a></li> <li><a href="https://scholar.google.com/citations?user=fyN2FbgAAAAJ" target="_blank" class="ai-google-scholar" title="Google Scholar"></a></li> <li><a href="http://dblp.uni-trier.de/pers/hd/s/Sofka:Michal" target="_blank" class="icon-archive" title="dblp"></a></li> </ul> </div> </nav> </div><!-- /#subfooter --> <div id="footer"> <div class="row"> <div class="medium-6 large-5 columns"> <h5 class="shadow-black">Copyright</h5> <ul class="inline-list"> <li>&copy; 2017 by <a style="display:inline;" href="http://www.sofka.com/">Michal Sofka</a>. The content is licensed under a <a style="display:inline;" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>. </li> </ul> </div><!-- /.large-5.columns --> <div class="small-6 medium-3 large-3 large-offset-1 columns"> <h5 class="shadow-black">Services</h5> <ul class="no-bullet shadow-black"> <li > <a href="" title=""></a> </li> <li > <a href="/contact/" title="Contact">Contact</a> </li> <li > <a href="/feed.xml" title="Subscribe to RSS Feed">RSS</a> </li> <li > <a href="/atom.xml" title="Subscribe to Atom Feed">Atom</a> </li> <li > <a href="/sitemap.xml" title="Sitemap for Google Webmaster Tools">sitemap.xml</a> </li> </ul> </div><!-- /.large-3.columns --> <div class="small-6 medium-3 large-3 columns"> <h5 class="shadow-black">Credits</h5> <ul class="no-bullet shadow-black"> <li > <a href="http://localhost:4000" title=""></a> </li> <li class="network-responsive" > <a href="https://phlow.github.io/feeling-responsive/" target="_blank" title="Built on Feeling Responsive">Built on Feeling Responsive</a> </li> <li class="network-entypo" > <a href="http://entypo.com/" target="_blank" title="Social Media Icons by Daniel Bruce">Social Media Icons by Daniel Bruce</a> </li> <li class="network-academicons" > <a href="http://jpswalsh.github.io/academicons/" target="_blank" title="Academicons by James Walsh">Academicons by James Walsh</a> </li> </ul> </div><!-- /.large-3.columns --> </div><!-- /.row --> </div><!-- /#footer --> </footer> <script src="/assets/js/javascript.min.js"></script> <script data-cfasync='false' src='/assets/js/twitterFetcher_min.js'></script> <script data-cfasync='false' src='/assets/js/recentTweets.js'></script> <script src="/assets/js/tabular.js" defer></script> <!-- jQuery --> <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> <!-- Bootstrap Core JavaScript --> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> <script> //$("#masthead").backstretch("/images//header_unsplash_railroad.jpg", {fade: 700}); //$("#masthead-with-text").backstretch("/images//header_unsplash_railroad.jpg", {fade: 700}); </script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-3321010-1', 'auto'); ga('set', 'anonymizeIp', true); ga('send', 'pageview'); </script> </body> </html>
